<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Buyers of Indian Groceries</title>
<link href="./CSS/overalTemplate.css" rel="stylesheet" media="all"
	type="text/css">
<link href="./CSS/buyer.css" rel="stylesheet" media="all"
	type="text/css">
<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.0/angular.min.js"></script>
</head>
<body id="igBody">
	<div id="main">
		<nav id="main-nav">
			<a class="link-tag" href="./Welcome.html" target="">Home</a> <a
				class="link-tag" href="./products.html" target="">Products</a> <a
				class="link-tag" href="./Buyer.html">New Buyer</a> <a
				class="link-tag" href="/PlaceOrder.html">Place Order</a> <a
				class="link-tag" href="/Invoice.html">Invoice</a>
		</nav>
		<div id="nav-div" ng-app="IGApp" ng-controller="displayControl">
			<div id="nav">
				<nav id="left-nav">
					<button ng-click="addNewBuyer()">New Buyer</button>
					<br>
					<button ng-click="showBuyers()">Buyers List</button>
					<br>
					<button ng-click="getPrevOrders()">Previous Orders</button>
				</nav>
			</div>
			<div id="main-container">
				
				<h2 ng-show="showMessage">{{message}}</h2>
				<div ng-show="newBuyer">
					<h1>Add New Buyer</h1>
					<form id="form-id" ng-submit="addBuyer()">
						<div class="form-div">
							<label for="name">Buyer Name</label><br> <input type="text"
								id="name" ng-model="form.buyer_name" size="100" required
								placeholder="Enter Name" />
						</div>
						<div class="form-div">
							<fieldset>
								<legend>Address:</legend>
								<label for="address">Address1</label><br>
								 <input
									type="text" id="address" ng-model="form.address" size="90"
									required placeholder="Enter D.No and Street" /> 
								 
								<select name="state" class="states" id="stateId" ng-model="form.state">
									<option value="" disabled>Select State</option>
									<option ng-repeat="(key,value) in locations" value="{{key}}">
									{{key}}</option>
									
								</select>  <select name="city" class="cities" id="cityId" ng-model="form.city">
									<option value="" disabled>Select City</option>
									<option ng-repeat="city in locations[form.state]" value="{{city}}">{{city}}</option>
								</select>
						</div>
						<div class="form-div">
							<label for="gstin"> GSTIN</label><br> <input type="text"
								id="gstin" ng-model="form.gstin" size="100" required
								placeholder="Enter GSTIN">
						</div>
						<div class="form-div">
							<button id="submit" type="submit" value="Submit">Add
								Buyer</button>
						</div>
					</form>

				</div>
				<div ng-show="allBuyers">

					<h1>List of Buyers</h1>
					<table id="buyer-table">
						<tr>
							<th>Buyer ID</th>
							<th>Buyer Name</th>
							<th>Buyer Address</th>
							<th>GSTIN</th>
							<th colspan="2">Actions</th>
						</tr>

						<tr ng-repeat="buyer in buyers">
							<td>{{ buyer.buyer_id }}</td>
							<td>{{ buyer.buyer_name }}</td>
							<td id="address">{{ buyer.address }}</td>
							<td>{{ buyer.gstin }}</td>
							<td ><a ng-click="getOrders(buyer.buyer_id)" class="button">Get
									Orders |</a></td>
							<td ><a ng-click="editBuyer(buyer)" class="button">Edit </a>
								| <a ng-click="removeBuyer(buyer.buyer_id)" class="button">Remove</a></td>
						</tr>

					</table>

				</div>
				<div ng-show="allOrders">

					<form id="form-id" ng-submit="getAllOrders()">
						<div class="form-div">
							<label style="padding-left: 105px;" for="buyer-Id">Enter
								the ID of buyer to get the previous orders </label> <input type="text"
								id="buyer-Id" ng-model="form.buyer_id" size="20" required
								placeholder="Enter ID"/>
						</div>
						<div class="form-div">
							<button style="margin: 5px 0 6px 39%;" id="submit" type="submit"
								value="Submit">Get Previous Orders</button>
						</div>
					</form>
					<h1>
						List of orders of <i>{{ buyer.buyer_name }}</i>
					</h1>

					<table>
						<tr>
							<th>Invoice Number</th>
							<th>Date</th>
							<th>Product Description</th>
							<th>Packaging</th>
							<th>Quantity</th>
							<th>Free Packs</th>
							<th>Distributor Price</th>
							<th>Seller Price</th>
							<th>CGST</th>
							<th>SGST</th>
							<th>Amount</th>
						</tr>
						<tr ng-repeat="invoice in invoices">
							<td>{{ invoice.invoice_num }}</td>
							<td>{{ invoice.order_date }}</td>
							<td>{{ invoice.description}}</td>
							<td>{{ invoice.package }}</td>
							<td>{{ invoice.quantity }}</td>
							<td>{{ invoice.free_packs</td>
							<td>{{ invoice.distributor_price }}</td>
							<td>{{ invoice.seller_price }}</td>
							<td>{{ (invoice.tax)/2 }}</td>
							<td>{{ (invoice.tax)/2 }}</td>
							<td>{{ invoice.amount }}</td>
						</tr>
					</table>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript" src="JS/IgApp.js"></script>
	<script type="text/javascript" src="JS/buyerService.js"></script>
	<script src="JS/buyer.js" type="text/javascript"></script>
	
</body>
</html>